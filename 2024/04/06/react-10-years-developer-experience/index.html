<!DOCTYPE html><html lang="zh-TW"><head><meta charset="utf-8"><meta name="theme-color" content="#0077B5"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="tfWfY4bkeILtxNyUg9UGfVkCNvKtAauF2r9WDQs8kBM"><meta property="fb:pages" content="219138595338413"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="å—¨ï¼Œæˆ‘æ˜¯æ—å½¥æˆï¼Œæ˜¯å€‹å–œæ­¡çˆ¬å±±çš„å‰ç«¯å·¥ç¨‹å¸«ï¼Œå°ˆæ³¨åœ¨ React.js çš„ç›¸é—œé–‹ç™¼ï¼Œé€™å€‹éƒ¨è½æ ¼æœƒåˆ†äº«ç¶²ç«™æŠ€è¡“ã€è·æ¶¯ç™¼å±•ã€å€‹äººæˆé•·å’Œç”¢æ¥­è§€å¯Ÿç›¸é—œæ–‡ç« ã€‚"><meta name="keyword" content="å‰ç«¯ä¸‰åˆ†é˜, å‰ç«¯, React.js, æ—å½¥æˆ, ç¶²ç«™æŠ€è¡“, è·æ¶¯ç™¼å±•, å€‹äººæˆé•·, ç”¢æ¥­è§€å¯Ÿ"><meta property="og:image" content="/img/icon_wechat.png"><link rel="shortcut icon" href="/img/favicon.ico"><title>Reactjs å•ä¸–åå¹´å¾Œçš„é–‹ç™¼é«”é©—: ä¸€è¢‹ç±³æ‰›å¹¾æ¨“çš„é›£åº¦æœ‰å¤šå°‘ | å‰ç«¯ä¸‰åˆ†é˜ | ä¸€èµ·ç”¨ä¸‰åˆ†é˜åˆ†äº«æŠ€è¡“èˆ‡çŸ¥è­˜</title><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous"><link rel="canonical" href="https://linyencheng.github.io/2024/04/06/react-10-years-developer-experience/"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/blog.min.css"><link rel="stylesheet" href="/css/highlight.css"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/feed.xml" title="å‰ç«¯ä¸‰åˆ†é˜" type="application/atom+xml"></head><body ontouchstart=""><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class="container-fluid"><div class="navbar-header page-scroll"><button type="button" class="navbar-toggle"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/">å‰ç«¯ä¸‰åˆ†é˜</a></div><div id="huxblog_navbar"><div class="navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a title="é¦–é " href="/">é¦–é </a></li><li><a href="/categories/">åˆ†é¡</a></li><li><a href="/about/">é—œæ–¼</a></li><li><a href="/archives/">åˆ—è¡¨</a></li><li><a href="/tags/">æ¨™ç±¤</a></li><li><a title="éš±ç§æ¬Šæ”¿ç­–" href="/pravicy">éš±ç§æ¬Šæ”¿ç­–</a></li></ul></div></div></div></nav><script async>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");function handleMagic(e){0<$navbar.className.indexOf("in")?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}$toggle.addEventListener("click",handleMagic)</script><style>.intro-header{position:relative;overflow:hidden;background:repeating-linear-gradient(0deg,rgba(255,255,255,.3) 0,rgba(255,255,255,.3) 1px,transparent 1px,transparent 10px),repeating-linear-gradient(90deg,rgba(255,255,255,.3) 0,rgba(255,255,255,.3) 1px,transparent 1px,transparent 10px);background-color:#b4dbf8}@media (max-width:768px){.mobile-hidden{display:none}}</style><progress value="0" id="progressBar" class="flat"><div class="progress-container"><span class="progress-bar"></span></div></progress><header class="intro-header"><div class="geometric-pattern"><div class="shape"></div><div class="shape"></div><div class="shape"></div><div class="shape mobile-hidden"></div><div class="shape mobile-hidden"></div><div class="shape mobile-hidden"></div></div><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><div class="tags"><a class="tag" href="/tags/#JavaScript" title="JavaScript">JavaScript</a> <a class="tag" href="/tags/#ç¶²ç«™æŠ€è¡“" title="ç¶²ç«™æŠ€è¡“">ç¶²ç«™æŠ€è¡“</a> <a class="tag" href="/tags/#React.js" title="React.js">React.js</a></div><h1 class="mb-0"><span>Reactjs å•ä¸–åå¹´å¾Œçš„é–‹ç™¼é«”é©—</span> <span class="subheading mb-2">ä¸€è¢‹ç±³æ‰›å¹¾æ¨“çš„é›£åº¦æœ‰å¤šå°‘</span></h1><a class="post-user-meta post-user-meta--big" href="/about"><img loading="lazy" alt="me" class="userPhoto d-inline-block" src="/img/me_icon.jpg"><div class="d-inline-block"><span class="user-name" style="color:#fff">æ—å½¥æˆ</span><br><span style="color:#fff">2024-04-06 | 11 min.</span> <span id="viewCountTotal" style="color:#fff"></span></div></a></div></div></div></div></header><article id="article-post"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1 post-container"><div id="toc" class="toc-article"><strong class="toc-title h3">æ–‡ç« ç›®éŒ„</strong><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B3%87%E6%96%99%E5%B1%A4-Flux-%E6%9E%B6%E6%A7%8B%E3%80%81Redux"><span class="toc-number">1.</span> <span class="toc-text">è³‡æ–™å±¤: Flux æ¶æ§‹ã€Redux</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Store-Rudux"><span class="toc-number">1.1.</span> <span class="toc-text">Store: Rudux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Store-Zustand"><span class="toc-number">1.2.</span> <span class="toc-text">Store: Zustand</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A5%AD%E5%8B%99%E9%82%8F%E8%BC%AF%E5%B1%A4-React-Hooks"><span class="toc-number">2.</span> <span class="toc-text">æ¥­å‹™é‚è¼¯å±¤: React Hooks</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#API-Hooks-SWR%E3%80%81React-Query"><span class="toc-number">2.1.</span> <span class="toc-text">API Hooks: SWRã€React Query</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E5%B1%A4-JSX%E3%80%81CSS-in-JS"><span class="toc-number">3.</span> <span class="toc-text">å±•ç¤ºå±¤: JSXã€CSS-in-JS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Reconciliation-Virtual-DOM%E3%80%81Fiber-Tree"><span class="toc-number">3.1.</span> <span class="toc-text">Reconciliation: Virtual DOMã€Fiber Tree</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%83%E4%BB%B6%E5%88%86%E9%A1%9E%E8%88%87%E9%80%B1%E6%9C%9F-React-Class-Component%E3%80%81Functional-Component"><span class="toc-number">3.2.</span> <span class="toc-text">å…ƒä»¶åˆ†é¡èˆ‡é€±æœŸ: React Class Componentã€Functional Component</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%83%E4%BB%B6%E9%96%8B%E7%99%BC-Storybookjs"><span class="toc-number">3.3.</span> <span class="toc-text">å…ƒä»¶é–‹ç™¼: Storybookjs</span></a></li></ol></li></ol></div><br><div class="google-ad"><ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-h4+1+1q-1t-2x" data-ad-client="ca-pub-1297466993744883" data-ad-slot="9012117796"></ins></div><p>Reactjs å¾ 2013 å¹´å•ä¸–å¾Œè‡³ä»Šæ»¿ 10 å¹´ï¼Œæä¾›å‰ç«¯é–‹ç™¼é ˜åŸŸå…ƒä»¶è¨­è¨ˆçš„å…¸ç¯„åŸºç¤ï¼Œé€æ­¥å¸¶å‹•ä¸¦å®Œå–„äº†é–‹ç™¼çš„ç”Ÿæ…‹ç³»çµ±ã€‚</p><p>æœ€åˆçš„ React å°±æ˜¯ä¸€å€‹å–®ç´”çš„å‡½å¼ï¼Œæä¾› props ä¸¦é€²è¡Œå…§éƒ¨çš„ç‹€æ…‹é‹ç®—å¾Œå›å‚³ä¸€å€‹è¨ˆç®—å¾Œçš„ DOM å…ƒç´ å‘ˆç¾åœ¨ç¶²é ä¸Šã€‚</p><blockquote><p>DOM &#x3D; React(props, state)</p></blockquote><p>å›é¡§éå»çš„åå¹´ï¼ŒReactjs çš„ç™¼å±•å¾ Clean Architecture è§’åº¦ä¾†çœ‹ä¸»è¦åœç¹ä»¥ä¸‹ä¸‰å€‹å±¤é¢ï¼š</p><ul><li>è³‡æ–™å±¤ï¼šå–®å‘è³‡æ–™æµ</li><li>æ¥­å‹™é‚è¼¯å±¤ï¼šHooks</li><li>å±•ç¤ºå±¤ï¼šJSXã€CSS-in-JS</li></ul><blockquote><p><img src="https://blog.cleancoder.com/uncle-bob/images/2012-08-13-the-clean-architecture/CleanArchitecture.jpg"><br>åœ–ç‰‡ä¾†æº: <a target="_blank" rel="noopener" href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html">https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html</a></p></blockquote><p>åœ¨ 2024 å¹´ Reactjs çš„é–‹ç™¼é«”é©—å°‡æœƒæ˜¯ä»€éº¼æ¨£å­å‘¢ï¼Ÿ</p><p>React è¿‘åå¹´çš„ç™¼å±•ä¸‹ä¾†ï¼Œåœ¨ 2022 React 18 ç‰ˆæœ¬é‡‹å‡ºå¾Œåœæ»¯äº†æ¥è¿‘å…©å¹´ï¼Œä¸‹ä¸€å€‹ä¸»è¦ç‰ˆæœ¬ 19 æœƒæ˜¯è‘—é‡åœ¨æ–°çš„æ¸²æŸ“å¼•æ“ï¼Œå¾å®˜æ–¹çš„ Github å¯å¯ä»¥çœ‹å‡ºæ¥ä¸‹ä¾†çš„ <a target="_blank" rel="noopener" href="https://github.com/facebook/react/pull/28843">React 18.3</a> ä¸»è¦æ˜¯ç‚ºäº†æ¥ä¸‹ä¾†çš„ <a target="_blank" rel="noopener" href="https://react.dev/blog/2024/02/15/react-labs-what-we-have-been-working-on-february-2024">React 19 ç‰ˆ</a>åšæº–å‚™ï¼Œéƒ¨è½æ ¼å¯ä»¥çœ‹å‡º React 19 å°‡æ¸›å°‘é–‹ç™¼è€…æ’°å¯«å¤šé¤˜çš„ hookï¼Œæœ€çµ‚çš„ç›®çš„æ˜¯ç°¡åŒ–é–‹ç™¼æµç¨‹ï¼Œé™ä½é–‹ç™¼äººå“¡çš„å­¸ç¿’æˆæœ¬ï¼Œæä¾›æ›´ç°¡æ½”çš„é–‹ç™¼é«”é©—èˆ‡æ›´é«˜çš„é–‹ç™¼æ•ˆç‡ã€‚</p><p>ç›¸è¼ƒæ–¼åŒæ¨£æœ‰è‘—åŒ…è¢±çš„éš”å£æ£š Angular æ¯æ¬¡å‡ç´šå¹¾ä¹éƒ½æ˜¯ Breaking Changeï¼ŒReact å¾æœ€åˆçš„ç°¡å–®å‡½å¼åº«åœ¨ç¶“æ­·äº†å¤šæ¬¡ç‰ˆæœ¬è¿­ä»£ï¼Œç¹¼çºŒèƒŒè‘—æ‰¿é‡çš„æ­·å²åŒ…è¢±å¸¶è‘—å¤§å®¶ç¹¼çºŒå‰è¡Œã€‚</p><p>ç›¸å°æ–¼ Reactã€Angularï¼Œè¼ƒæ²’æœ‰äººå“¡å’Œç¨‹å¼ç¢¼åŒ…è¢±çš„ Vue å’Œ Svelte ä¹Ÿéƒ½åœ¨ React å’Œ Angular çš„è‚©è†€ä¸Šæä¾›äº†ä¸éŒ¯çš„è§£æ±ºæ–¹æ¡ˆï¼Œè‡³æ–¼æœ€æ–°çš„ React Server Components è¦è®“ React ä¸€è¢‹ç±³æ‰›å¹¾æ¨“? Next.js å’Œ RedwoodJS æ­£åœ¨å˜—è©¦è‘—çµ¦å‡ºå¥½çš„ç­”æ¡ˆã€‚</p><h2 id="è³‡æ–™å±¤-Flux-æ¶æ§‹ã€Redux"><a href="#è³‡æ–™å±¤-Flux-æ¶æ§‹ã€Redux" class="headerlink" title="è³‡æ–™å±¤: Flux æ¶æ§‹ã€Redux"></a>è³‡æ–™å±¤: Flux æ¶æ§‹ã€Redux</h2><blockquote><p>Reactjs æå‡ºå–®å‘è³‡æ–™æµï¼ˆUnidirectional Data Flowï¼‰çš„æ¦‚å¿µï¼Œå¼·èª¿è³‡æ–™çš„ä¸å¯è®Šæ€§ï¼ˆImmutabilityï¼‰</p></blockquote><p>Flux æ¶æ§‹æä¾›è³‡æ–™ç®¡ç†æ–¹æ¡ˆï¼Œå°ç·¨æ—©æœŸæ¥è§¸é <a target="_blank" rel="noopener" href="https://alt.js.org/">Alt</a> å’Œ <a target="_blank" rel="noopener" href="https://redux.js.org/">Redux</a> å…©ç¨®ï¼ŒFlux ç”¨å–®å‘è³‡æ–™æµå–ä»£å‚³çµ±çš„ MVCï¼Œé€™æ„è³‡æ–™å¾å–®ä¸€å…¥å£ (å‹•ä½œ) é€²å…¥ï¼Œç„¶å¾Œé€éç‹€æ…‹ç®¡ç†å™¨ (Store) å‘å¤–æµå‹•ï¼Œæœ€å¾Œåˆ°é”ç•«é¢ (view)ï¼Œç•«é¢åˆå¯ä»¥é€éå‘¼å«å…¶ä»–å‹•ä½œä¾†å›æ‡‰ä½¿ç”¨è€…è¼¸å…¥ï¼Œé‡æ–°é–‹å§‹è³‡æ–™æµçš„æµç¨‹ã€‚</p><p>æ—©æœŸçš„ Redux æœ‰å€‹å•é¡Œå°±æ˜¯æœƒç”¢ç”Ÿå¾ˆå¤šçš„ Code Boilerplateï¼Œé–‹ç™¼éç¨‹ä¸­æœƒå¾ˆå¸¸éœ€è¦è¤‡è£½è²¼ä¸Šè¨±å¤šé¡ä¼¼æ¶æ§‹çš„ç¨‹å¼ç¢¼ï¼Œå®˜æ–¹å¾Œä¾†é‚„æ¨å‡º <a target="_blank" rel="noopener" href="https://redux.js.org/recipes/reducing-boilerplate">Redux Toolkits ä¾†å”åŠ©å¯«æ³•ç°¡åŒ–</a>ï¼Œæœ¬ä¾†è¦ç¶­è­·ä¸‰å€‹åœ°æ–¹ï¼Œç¾åœ¨è®Šæˆåªè¦ç¶­è­·ä¸€ä»½é…ç½®æª”å°±å¥½äº†ã€‚</p><h3 id="Store-Rudux"><a href="#Store-Rudux" class="headerlink" title="Store: Rudux"></a>Store: Rudux</h3><p>ç‚ºä»€éº¼éœ€è¦ Redux? ä½¿ç”¨èˆ‡å¦çš„å·®ç•°åœ¨å“ª?</p><p>ç›´æ¥é–‹å§‹ä¸€å€‹æƒ…å¢ƒï¼Œæˆ‘å€‘æƒ³åƒä¸€å€‹é é¢ä¸­æœ‰ä¸‰å€‹å…ƒä»¶:</p><ol><li>å…ƒä»¶ä¸€: ç™»å…¥æŒ‰éˆ•å€å¡Šï¼Œç™»å…¥å¾Œé¡¯ç¤º hello, XXX (XXX ç‚ºå­¸ç”Ÿåç¨±)</li><li>å…ƒä»¶äºŒ: é¡¯ç¤ºç™»å…¥å¾Œæ’ˆå›çš„å„ç§‘æˆç¸¾è³‡æ–™</li><li>å…ƒä»¶ä¸‰: æ›´æ”¹å­¸ç”Ÿå§“åå€å¡Š</li></ol><p>é‚£éº¼æœ‰æˆ–æ²’æœ‰ Redux çš„æƒ…æ³ä¸‹ï¼Œè¦æ€éº¼å¯¦ä½œé€™æ¨£çš„é é¢å‘¢ï¼Ÿé—œéµéœ€è¦è§£æ±ºçš„å•é¡Œå°±æ˜¯å…ƒä»¶ä¹‹é–“æºé€šçš„å•é¡Œ:</p><ul><li>æ²’æœ‰ Redux æ™‚: ä½¿ç”¨ Container å…ƒä»¶ä¾†ç®¡ç†ç‹€æ…‹ï¼ŒæŠŠä»¥ä¸Šä¸‰å€‹å­å…ƒä»¶éƒ½æ”¾åœ¨å®¹å™¨è£¡ï¼Œä¸¦åœ¨å®¹å™¨ä¸­å¯«å¹¾å€‹ callback function ç•¶ä½œ props å‚³é€²å­å…ƒä»¶ä¸­ï¼Œè®“å­å…ƒä»¶å¯ä»¥åœ¨æ”¹è®Šç‹€æ…‹æ™‚,æŠŠæ”¹è®Šçš„ç‹€æ…‹åŠæ™‚å›å‚³åˆ°å®¹å™¨è£¡ï¼Œé€™å°±æ˜¯å®˜æ–¹æ–‡ä»¶ä¸­å¯«çš„ <a target="_blank" rel="noopener" href="https://facebook.github.io/react/docs/lifting-state-up.html">Lift State Up</a></li></ul><blockquote><p><img src="https://react.dev/_next/image?url=/images/docs/diagrams/passing_data_lifting_state.dark.png&w=640&q=75"><br>Lift State up: <a target="_blank" rel="noopener" href="https://react.dev/learn/passing-data-deeply-with-context">https://react.dev/learn/passing-data-deeply-with-context</a></p></blockquote><ul><li>æœ‰ Redux å¾Œ: æœ€å¤§çš„æ”¹è®Šå°±æ˜¯ï¼ŒLift State Up to Storeï¼ŒæŠŠç‹€æ…‹çµ±ä¸€ç®¡ç†é¿å… Prop drilling ç¶­æŒ Single Source of Truthï¼Œæ‰€æœ‰çš„ä¾†æºéƒ½æ˜¯ä¾†è‡ªæ–¼ä¸€å€‹å¯è¢«é æ¸¬çš„åœ°æ–¹ï¼Œé–‹ç™¼å·¥å…·å› æ­¤å¯ä»¥åšåˆ°æ™‚ç©ºæ—…è¡Œï¼Œè®“ç‹€æ…‹åœåœ¨ä»»æ„æƒ³è¦çš„æ™‚é–“é»</li></ul><blockquote><p><img src="https://react.dev/_next/image?url=/images/docs/diagrams/passing_data_prop_drilling.dark.png&w=640&q=75"><br>Prop drilling: <a target="_blank" rel="noopener" href="https://react.dev/learn/passing-data-deeply-with-context">https://react.dev/learn/passing-data-deeply-with-context</a></p></blockquote><p>ä½¿ç”¨ Redux ToolKits å¾ŒæŒ‰ç…§åŠŸèƒ½æ­é…åˆ†é¡ï¼Œä»¥å‰›å‰› Clean Architecture è§’åº¦ä¾†èªªå°±æ˜¯é‡å° Entities åˆ†é¡ï¼Œå°ç·¨è¦ºå¾—é€™ç¨®é…ç½®æœƒæ¯”è¼ƒé©åˆå¤§å‹å°ˆæ¡ˆï¼Œèˆ‰ä¾‹ä¾†èªªä¾ç…§ä¸åŒçš„è…³è‰²åŠŸèƒ½å°±æœƒåˆ†æˆ</p><ul><li>typeOne</li><li>typeTwo</li><li>typeThree</li></ul><p>ç”¨å¸¸è¦‹çš„æ‹è³£ç¶²ç«™ä¾†èªªå°±åƒæ˜¯è²·å®¶ã€æ™®é€šè³£å®¶ã€å•†åŸè³£å®¶ï¼Œè€Œæ¯å€‹åŠŸèƒ½æ‰€éœ€è¦çš„ actionã€componentsã€containersã€reducers éƒ½æœƒæ”¾åœ¨ä¸€èµ·ï¼Œæ‰€ä»¥åœ¨é–‹ç™¼æ™‚ï¼Œæ¯å€‹å·¥ç¨‹å¸«éƒ½å¯ä»¥åœ¨ç¨ç«‹çš„è³‡æ–™å¤¾ä¸­å®Œæˆè©²æ¬¡çš„ä»»å‹™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">â””â”€â”€ features</span><br><span class="line">    â”œâ”€â”€ typeOne</span><br><span class="line">    â”‚   â”œâ”€â”€ TypeOne.js</span><br><span class="line">    â”‚   â”œâ”€â”€ TypeOne.styles.scss</span><br><span class="line">    â”‚   â””â”€â”€ typeOneSlice.js</span><br><span class="line">    â”œâ”€â”€ typeTwo</span><br><span class="line">    â”‚   â”œâ”€â”€ TypeTwo.js</span><br><span class="line">    â”‚   â”œâ”€â”€ TypeTwo.styles.scss</span><br><span class="line">    â”‚   â””â”€â”€ typeTwoSlice.js</span><br><span class="line">    â””â”€â”€ typeThree</span><br><span class="line">        â”œâ”€â”€ TypeThree.js</span><br><span class="line">        â”œâ”€â”€ TypeThree.styles.scss</span><br><span class="line">        â””â”€â”€ typeThreeSlice.js</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createSlice &#125; <span class="keyword">from</span> <span class="string">&quot;@reduxjs/toolkit&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialState = &#123; <span class="attr">value</span>: <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> counterSlice = <span class="title function_">createSlice</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;counter&quot;</span>,</span><br><span class="line">  initialState,</span><br><span class="line">  <span class="attr">reducers</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      state.<span class="property">value</span>++;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">decrement</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      state.<span class="property">value</span>--;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">incrementByAmount</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">      state.<span class="property">value</span> += action.<span class="property">payload</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> &#123; increment, decrement, incrementByAmount &#125; = counterSlice.<span class="property">actions</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> counterSlice.<span class="property">reducer</span>;</span><br></pre></td></tr></table></figure><p>ä»¥ç¨‹å¼ç¢¼çš„æ¶æ§‹é¢ä¾†èªªï¼Œä½¿ç”¨ Redux æ˜¯ä¸€å€‹é‡å¤§çš„æ±ºå®šï¼Œå¾å¯«æ³•ä¸Šçœ‹ä¾†å¹¾ä¹æ˜¯ç©¿é€äº†å°ˆæ¡ˆæ‰€æœ‰åœ°æ–¹ï¼Œå¾ GUI ä¸Šçš„ Action éœ€è¦é€éç‰¹æ®Šçš„æ–¹å¼ Dispatch ä¸€ç›´åˆ°æ‰“ API çš„ middleware ä¸€ç›´åˆ° Global çš„ Storeï¼Œæ‰€ä»¥ä¹Ÿæ‰æ¼”è®Šå‡º Container å’Œ Component çš„æ¦‚å¿µï¼Œé‚„æ˜¯ç›¡é‡è®“å…ƒä»¶æ˜¯å¯ä»¥é«˜åº¦é‡ç”¨çš„è¨­è¨ˆã€‚</p><h3 id="Store-Zustand"><a href="#Store-Zustand" class="headerlink" title="Store: Zustand"></a>Store: Zustand</h3><p>éš¨è‘—æ™‚é–“çš„æ¼”é€²ï¼Œæœ€è¿‘æœ‰è¶Šä¾†è¶Šå¤šç®¡ç†ç‹€æ…‹çš„å·¥å…·ï¼Œä»¥æ¦‚å¿µä¸Šä¾†èªªç²—åˆ†ç‚ºä¸‰ç¨®æµæ´¾ Atomã€Storeã€Proxyï¼Œå¦‚æœä»¥æœ€å‚³çµ±çš„ Store æ¦‚å¿µä¾†èªªï¼ŒZustand æ˜¯å°ç·¨ç›®å‰ç”¨éæœ€ç°¡å–®çš„ï¼Œæœ€åŸºæœ¬çš„ store åªè¦çŸ­çŸ­å¹¾è¡Œå°±å®Œæˆé…ç½®ï¼Œå¦‚æœæƒ³è¦çœ‹çœ‹å°ç·¨çš„æ¨å‘æ–‡ï¼Œæ­¡è¿ç¹¼çºŒé–±è®€<a href="https://linyencheng.github.io/2024/10/02/react/react-store-zustand/">ç‚ºä»€éº¼é¸æ“‡ Zustand ä½œç‚ºæœ€ä½³ç‹€æ…‹ç®¡ç†è§£æ±ºæ–¹æ¡ˆ </a>é€™ç¯‡æ–‡ç« ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; create &#125; <span class="keyword">from</span> <span class="string">&quot;zustand&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">inc</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;)),</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><p>ç¨‹å¼ç¢¼æ¶æ§‹ä¸Šä¾†èªªï¼Œå› ç‚ºæ˜¯ä½¿ç”¨ hook çš„é—œä¿‚ï¼Œæ‰€ä»¥å‰©ä¸‹åªéœ€è¦åœ¨å…ƒä»¶ä¸­é€é hook çš„æ¦‚å¿µå°‡ Store æ›è¼‰é€²å»å…ƒä»¶é€²è¡Œä½¿ç”¨å³å¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; count, inc &#125; = <span class="title function_">useStore</span>();</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;inc&#125;</span>&gt;</span>one up<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å°ˆæ¡ˆæ¶æ§‹ä¸Š Zustand é™¤äº† hook ä»¥å¤–ä¹Ÿæä¾›äº†ä¸åŒçš„æ¶æ§‹æ–¹å¼ï¼Œä¸ä½¿ç”¨ hook è€Œé€éç›´æ¥ç•¶æ¨¡çµ„ä½¿ç”¨çš„æ–¹å¼ä¹Ÿè®“å…ƒä»¶çš„å‘ˆç¾èƒ½æ›´ç‚ºç°¡æ½”ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> useDogStore = <span class="title function_">create</span>(<span class="function">() =&gt;</span> (&#123; <span class="attr">paw</span>: <span class="literal">true</span>, <span class="attr">snout</span>: <span class="literal">true</span>, <span class="attr">fur</span>: <span class="literal">true</span> &#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Getting non-reactive fresh state</span></span><br><span class="line"><span class="keyword">const</span> paw = useDogStore.<span class="title function_">getState</span>().<span class="property">paw</span>;</span><br><span class="line"><span class="comment">// Listening to all changes, fires synchronously on every change</span></span><br><span class="line"><span class="keyword">const</span> unsub1 = useDogStore.<span class="title function_">subscribe</span>(<span class="variable language_">console</span>.<span class="property">log</span>);</span><br><span class="line"><span class="comment">// Updating state, will trigger listeners</span></span><br><span class="line">useDogStore.<span class="title function_">setState</span>(&#123; <span class="attr">paw</span>: <span class="literal">false</span> &#125;);</span><br><span class="line"><span class="comment">// Unsubscribe listeners</span></span><br><span class="line"><span class="title function_">unsub1</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// You can of course use the hook as you always would</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> paw = <span class="title function_">useDogStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">paw</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ¥­å‹™é‚è¼¯å±¤-React-Hooks"><a href="#æ¥­å‹™é‚è¼¯å±¤-React-Hooks" class="headerlink" title="æ¥­å‹™é‚è¼¯å±¤: React Hooks"></a>æ¥­å‹™é‚è¼¯å±¤: React Hooks</h2><p><a href="https://linyencheng.github.io/2024/08/17/react/react-hooks/">ç‚ºä»€éº¼è¦é¸æ“‡ React Hooks?</a></p><blockquote><p>React Hooks æä¾›äº†ä¸€ç¨®æ›´ç°¡æ½”ã€æ›´éˆæ´»çš„æ–¹å¼ä¾†ç®¡ç†ç‹€æ…‹å’Œå‰¯ä½œç”¨ï¼Œä½¿é–‹ç™¼äººå“¡èƒ½å¤ æ›´å°ˆæ³¨æ–¼æ¥­å‹™é‚è¼¯çš„å¯¦ç¾</p></blockquote><p>React Hooks çš„å‡ºç¾æ˜¯ Reactjs ç™¼å±•å²ä¸Šçš„é‡è¦é‡Œç¨‹ç¢‘ï¼Œè®“å‰¯ä½œç”¨è™•ç†å’ŒåŠ å€¼åŠŸèƒ½èƒ½é€é hook çš„æ–¹å¼æ•´åˆé€² functional componentï¼Œç›¸å° class çš„è™•ç†èƒ½æä¾›æ›´ç°¡å–®çš„å¯«æ³•ï¼Œåƒ redux çš„ useSelector å°±å–ä»£ connect å’Œ mapStateToPropsã€‚</p><p>React Hooks çš„æ¦‚å¿µå¯ä»¥æƒ³åƒæˆæ˜¯åœ¨ç™»å±±èƒŒåŒ…ä¸Šï¼Œé€éå¤–æ›ç³»çµ±å°‡éœ€è¦çš„åŠŸèƒ½æˆ–éœ€è¦çš„ææ–™æ›è¼‰åˆ°èƒŒåŒ…ä¸Šï¼Œé€é hooks å°‡é‚è¼¯è™•ç†çš„å‡½å¼å’Œè™•ç†å¾Œçš„è³‡æ–™æ›è¼‰åˆ°å…ƒä»¶ä¸Šã€‚</p><blockquote><p><img src="https://pic2.zhimg.com/v2-33eb45debc551d28d565ad31d3b59599_b.webp?consumer=ZHI_MENG"><br>åœ–ç‰‡ä¾†æº: <a target="_blank" rel="noopener" href="https://www.zhihu.com/tardis/zm/art/456354561?source_id=1003">https://www.zhihu.com/tardis/zm/art/456354561?source_id=1003</a></p></blockquote><p>React Hooks ç”±å‰›å‰›çš„èªªæ˜ä¾†çœ‹å°±å±¬æ–¼å¤–æ›å­ç³»çµ±çš„ä¸€å€‹æ¦‚å¿µï¼Œæ‰€ä»¥åœ¨æ’°å¯«ä¸Šä¹Ÿæœ‰è¦æ³¨æ„çš„è¦ç¯„</p><ol><li>åªèƒ½åœ¨ function ä¸­çš„æœ€ä¸Šå±¤ä½¿ç”¨ hooksï¼Œä¸è¦åœ¨è¿´åœˆä¸­æˆ–æ˜¯åˆ¤æ–·è£¡é¢åŸ·è¡Œï¼Œå¤–æ›ç³»çµ±å¿…é ˆè·Ÿè‘—å…ƒä»¶åœ¨ç”¢ç”Ÿçš„æ™‚å€™ä¸€èµ·æ›è¼‰ä¸Šå»ï¼Œå°±åƒæ˜¯ç™»å±±èƒŒåŒ…å‡ºé–€ç™¼å‰å°±è¦å°‡è£å‚™æº–å‚™é½Šå…¨ä¸€æ¨£</li><li>åªèƒ½åœ¨ React Function è£¡é¢ä½¿ç”¨ hooks ä¸èƒ½åœ¨ä¸€èˆ¬çš„ JavaScript Function ä¸­ä½¿ç”¨ï¼Œå› ç‚º hooks æ˜¯å°ˆå±¬æ–¼ React å…ƒä»¶çš„å¤–æ›ç³»çµ±ï¼Œå°±æ˜¯åƒéƒ½å·²ç¶“å‡ºé–€ç™»å±±äº†å¤–æ›çš„æ±è¥¿åœ¨åŠå±±è…°çªç„¶ä¿®æ”¹ä¸€æ¨£</li><li>ä¸è¦å‹•æ…‹çš„ä¿®æ”¹ hooks çš„å…§å®¹ï¼Œå¤–æ›ç³»çµ±ä¹Ÿæ˜¯ä¸€å€‹ç³»çµ±ä¸è¦é‚Šä½¿ç”¨é‚Šæ”¹è®Š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. åªèƒ½æ›è¼‰åœ¨æœ€ä¸Šå±¤ï¼Œä¸”ä¸€é–‹å§‹å°±ä½¿ç”¨ï¼Œè€Œä¸æ˜¯ç•¶ä½œåŠè·¯ä¸Šçš„é¸é…</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ChatInput</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">useData</span>=<span class="string">&#123;useDataWithLogging&#125;</span> /&gt;</span></span>; <span class="comment">// ğŸ”´ Bad: don&#x27;t pass Hooks as props</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. ä¸è¦å‹•æ…‹çš„ä¿®æ”¹ hooks çš„å…§å®¹ï¼Œå¤–æ›ç³»çµ±ä¹Ÿæ˜¯ä¸€å€‹ç³»çµ±ä¸è¦é‚Šä½¿ç”¨é‚Šæ”¹è®Š</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ChatInput</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> useDataWithLogging = <span class="title function_">withLogging</span>(useData); <span class="comment">// ğŸ”´ Bad: don&#x27;t write higher order Hooks</span></span><br><span class="line">  <span class="keyword">const</span> data = <span class="title function_">useDataWithLogging</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="API-Hooks-SWRã€React-Query"><a href="#API-Hooks-SWRã€React-Query" class="headerlink" title="API Hooks: SWRã€React Query"></a>API Hooks: SWRã€React Query</h3><p>èˆ‰å€‹ä¾‹å­ä¾†èªªèˆ‡å¾Œç«¯ API ä»‹é¢æ•´åˆçš„éƒ¨åˆ†ï¼Œæ—©æœŸçš„å¯«æ³•å°ç·¨å¤§å¤šæ˜¯é€éå®šç¾© API Service ä¾†é€²è¡Œè™•ç†ã€‚</p><p>åœ¨ Fetch å°šæœªæ™®åŠæ™‚ï¼ŒAxios API æä¾›äº†ä¸€å€‹ä¸éŒ¯çš„è§£æ±ºæ–¹æ¡ˆï¼Œæ‰“ API çš„æ™‚å€™ï¼Œå¯èƒ½å¸¸å¸¸ä¸åªä¸€å€‹å¾Œç«¯ï¼Œä¸åŒå¾Œç«¯ä¹Ÿæœƒéœ€è¦æœ‰å…©å€‹ä¸åŒçš„ tokenï¼Œæ”¾ç½®çš„ä½ç½®å¯èƒ½ä¹Ÿä¸ä¸€æ¨£ï¼ŒæˆåŠŸå›è¦†çš„ç‹€æ…‹ç¢¼ä¹Ÿä¸åŒï¼Œå¤±æ•—çš„æƒ…æ³ä¹Ÿä¸å¤§ç›¸åŒã€‚æ‰€ä»¥å¦‚æœç•¶å¤šå€‹åœ°æ–¹éƒ½éœ€è¦åŒæ™‚æ‰“ Aã€B å…©å€‹ä¸åŒçš„ API æ™‚ï¼Œä¹Ÿä»£è¡¨å¤šå€‹åœ°æ–¹éƒ½è¦é€²è¡Œé¡ä¼¼çš„é &#x2F;å¾Œè™•ç†ã€‚</p><p>é‚£ <a target="_blank" rel="noopener" href="https://github.com/axios/axios">axios</a> é€éç”¢ç”Ÿ instance çš„æ–¹å¼ï¼Œå¹«æˆ‘å€‘çµ±ä¸€è™•ç†äº† request ç™¼å‡ºå‰ï¼Œæ¥æ”¶ response å¾Œï¼Œçµ±ä¸€çš„é è™•ç†ã€å¾Œè™•ç†çš„å•é¡Œã€‚é€™æ¨£åªè¦åœ¨ä¸åŒçš„åœ°æ–¹ä½¿ç”¨ Aã€B instance å»é€²è¡Œ API çš„ä¸²æ¥å³å¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> A = axios.<span class="title function_">create</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add a request interceptor</span></span><br><span class="line">A.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">// Do something before request is sent</span></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// Do something with request error</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add a response interceptor</span></span><br><span class="line">A.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="comment">// Do something with response data</span></span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// Do something with response error</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">A.<span class="title function_">get</span>(<span class="string">&quot;/api/path&quot;</span>);</span><br></pre></td></tr></table></figure><p>SWR èˆ‡ React Query å‰‡æä¾›äº† hook çš„è§£æ±ºæ–¹æ¡ˆï¼Œå°æ–¼ API è³‡æ–™çš„è™•ç†å¯«æ³•ä¸Šç°¡åŒ–äº†ä¸å°‘ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> useSWR <span class="keyword">from</span> <span class="string">&quot;swr&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">fetcher</span> = (<span class="params">url</span>) =&gt; axios.<span class="title function_">get</span>(url).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="property">data</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; data, error, isLoading &#125; = <span class="title function_">useSWR</span>(<span class="string">&quot;/api/user&quot;</span>, fetcher);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>failed to load<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  <span class="keyword">if</span> (isLoading) <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>hello &#123;data.name&#125;!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—©æœŸ API services çš„è¨­è¨ˆåœ¨ hook å‰‡é€éå®¢è£½åŒ–ä¸åŒçš„ fetcher ä¾†é€²è¡Œè½‰æ›ï¼Œfetcher ä¾èˆŠå¯ä»¥ç¶­æŒåŸä¾†çš„ä½œæ³•ï¼Œåªæ˜¯åœ¨å…ƒä»¶ä¸­æˆ‘å€‘ä¸å†é€é <code>useEffect</code> å’Œ <code>useState</code> ä¾†è™•ç†è³‡æ–™ã€‚</p><h2 id="å±•ç¤ºå±¤-JSXã€CSS-in-JS"><a href="#å±•ç¤ºå±¤-JSXã€CSS-in-JS" class="headerlink" title="å±•ç¤ºå±¤: JSXã€CSS-in-JS"></a>å±•ç¤ºå±¤: JSXã€CSS-in-JS</h2><p>Reactjs ä½¿ç”¨ JSX èªæ³•ä¾†æè¿° UI ç•Œé¢ï¼Œä½¿å…¶æ›´æ˜“æ–¼ç†è§£å’Œç¶­è­·ã€‚</p><blockquote><p>DOM &#x3D; React(props, state)</p></blockquote><p>å…ƒä»¶ä¸­çš„ JSX æœƒé€é <a target="_blank" rel="noopener" href="https://react.dev/reference/react/createElement">createElement</a> é€™å€‹ function è¢«è½‰æ›æˆ React Elementã€‚</p><h3 id="Reconciliation-Virtual-DOMã€Fiber-Tree"><a href="#Reconciliation-Virtual-DOMã€Fiber-Tree" class="headerlink" title="Reconciliation: Virtual DOMã€Fiber Tree"></a>Reconciliation: Virtual DOMã€Fiber Tree</h3><p><a target="_blank" rel="noopener" href="https://zh-hant.reactjs.org/blog/2015/12/18/react-components-elements-and-instances.html">React Element</a> æ˜¯ä¸€å€‹ç‰©ä»¶ï¼ŒåŒ…å« type åŠ propertiesï¼Œtype ç”¨ä¾†å€åˆ†æ˜¯ component instance æˆ–æ˜¯ DOM nodeï¼ŒElement åœ¨ React ä¸­åˆåˆ†æˆå…©ç¨®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. Element (type ç‚º DOM node)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;button&#x27;</span>,</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">className</span>: <span class="string">&#x27;button button-blue&#x27;</span>,</span><br><span class="line">    <span class="attr">children</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;b&#x27;</span>,</span><br><span class="line">      <span class="attr">props</span>: &#123;</span><br><span class="line">        <span class="attr">children</span>: <span class="string">&#x27;OK!&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;button <span class="keyword">class</span>=<span class="string">&#x27;button button-blue&#x27;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    OK!</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. Component Element (type ç‚º instance)</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">DeleteAccount</span> = (<span class="params"></span>) =&gt; (&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">SubmitForm</span>,</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;p&#x27;</span>,</span><br><span class="line">      <span class="attr">props</span>: &#123;</span><br><span class="line">        <span class="attr">children</span>: <span class="string">&#x27;Are you sure?&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Button</span>,</span><br><span class="line">      <span class="attr">props</span>: &#123;</span><br><span class="line">        <span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span>,</span><br><span class="line">        <span class="attr">children</span>: <span class="string">&#x27;Cancel&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">   &#125;]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">DeleteAccount</span> = (<span class="params"></span>) =&gt; (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">SubmitForm</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Are you sure?<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Button</span> <span class="attr">color</span>=<span class="string">&#x27;blue&#x27;</span>&gt;</span>Cancel<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">SubmitForm</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>ç•¶æˆ‘å€‘çŸ¥é“åº•å±¤çš„å®šç¾©ä¹‹å¾Œï¼ŒReact é€é Virtual DOM æ¸›å°‘äº†é«˜æˆæœ¬çš„ DOM tree æ“ä½œï¼Œå¯ä»¥åƒè€ƒ <a target="_blank" rel="noopener" href="https://grfia.dlsi.ua.es/ml/algorithms/references/editsurvey_bille.pdf">state of the art algorithms</a>ï¼ŒReact æ•ˆèƒ½å¥½å°±æ­¸åŠŸæ–¼å¯«çš„ç¨‹å¼ç¢¼ä¸¦ä¸æœƒæ“ä½œ DOMï¼Œè€Œæ˜¯æœƒæœ‰ä»¥ä¸‹ç‰¹æ€§:</p><ul><li>æ”¹è®Šçš„ç‹€æ…‹å…¶å¯¦æ˜¯æ“ä½œæˆ‘å€‘å¸¸è½åˆ°çš„ Virtual DOM æˆ–æ˜¯ Fiber Tree</li><li>ç‹€æ…‹å° UI å½±éŸ¿æ˜¯<em>éåŒæ­¥</em>ï¼Œå¦‚æœç‹€æ…‹åœ¨ä¸€å€‹å¾ªç’°å…§ <code>A -&gt; B -&gt; C -&gt; A</code> é€™æ¨£æœ€å¾Œ DOM å°±ä¸æœƒè®ŠåŒ–</li><li>ç›¸åŒ typeï¼Œå¦‚æœ attributes æ”¹è®Šå‰‡æœƒåµæ¸¬ä¸¦è®ŠåŒ– attribute</li><li>Reconciliation (fiber) å°‡è¤‡é›œåº¦æ¸›å°‘åˆ° O(n)</li></ul><p>React ä¹Ÿæœƒé€™æ¨£çš„è³‡æ–™çµæ§‹ä¸­ï¼Œè™•ç†ç‹€æ…‹å°æ–¼å…ƒä»¶çš„æ”¹è®Šï¼Œé€™å€‹çµæ§‹å°±æ˜¯æˆ‘å€‘å¸¸è½çš„ Virtual DOMï¼Œæœ‰ç¯‡é–‹ç®±æ–‡å¯«çš„å¾ˆæ£’:</p><p><a target="_blank" rel="noopener" href="https://pomb.us/build-your-own-react/">https://pomb.us/build-your-own-react/</a></p><p>åœ¨é€™ç¯‡æ–‡ç« ä¸­å¯ä»¥çœ‹æˆæ˜¯ä¸€æ£µ <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Left-child_right-sibling_binary_tree">left-chlid right-sibling tree</a>:</p><ul><li>æ¯ä¸€å€‹ Node æœ‰æŒ‡å‘ Parent çš„åƒè€ƒ</li><li>éç¨‹å…ˆçœ‹æœ‰æ²’æœ‰ Childï¼Œå†çœ‹æœ‰æ²’æœ‰ Siblingï¼Œéƒ½æ²’æœ‰æ‰å›åˆ° Parent</li><li>æ•´æ£µæ¨¹èµ°å®Œæ‰ render çµæœåˆ°å¯¦éš›çš„ DOM ä¸Š</li></ul><p>Reconciliation å°±æ˜¯ä¸€å€‹æ¼”ç®—æ³•ï¼Œæ‰¾å‡ºå“ªäº›æ¨¹ç¯€é»å“ªäº›éœ€è¦è®ŠåŒ–ï¼Œç•¶æˆ‘å€‘å‘¼å« <code>render()</code> çš„æ™‚å€™ï¼ŒReact æœƒåšä¸€å€‹ Top-Down çš„ Reconciliationã€‚</p><p>éç¨‹ä¸­æœƒä¸åœåœ°å»å•ä½ çš„ type æ˜¯ä»€éº¼? å¦‚æœæˆ‘å€‘å®šç¾©äº†ä¸€å€‹ Component Elements X ä¸” type æ˜¯ Yï¼Œé‚£ React å°±æœƒå»å•ä»€éº¼æ˜¯ Yï¼Œç›´åˆ°å•åˆ°æœ€åŸºç¤çš„çµ„æˆç‚ºæ­¢ã€‚</p><p>Reconciliation å¯¦ä½œä¸Šæœƒç¬¦åˆä»¥ä¸‹å‡è¨­:</p><ul><li>ä¸åŒ typeï¼Œåœ¨ react æœƒç”¢ç”Ÿä¸åŒçš„æ¨¹ï¼Œä¸æœƒå»åµæ¸¬è€Œæ˜¯ç›´æ¥å–ä»£</li><li>åµæ¸¬ä¸€å€‹ list çš„æ”¹è®Šæœƒé€é keys ä¾†å¢åŠ æ•ˆèƒ½</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&quot;2015&quot;</span>&gt;</span>Duke<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&quot;2016&quot;</span>&gt;</span>Villanova<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&quot;2014&quot;</span>&gt;</span>Connecticut<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&quot;2015&quot;</span>&gt;</span>Duke<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&quot;2016&quot;</span>&gt;</span>Villanova<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="å…ƒä»¶åˆ†é¡èˆ‡é€±æœŸ-React-Class-Componentã€Functional-Component"><a href="#å…ƒä»¶åˆ†é¡èˆ‡é€±æœŸ-React-Class-Componentã€Functional-Component" class="headerlink" title="å…ƒä»¶åˆ†é¡èˆ‡é€±æœŸ: React Class Componentã€Functional Component"></a>å…ƒä»¶åˆ†é¡èˆ‡é€±æœŸ: React Class Componentã€Functional Component</h3><p>å¯¦éš›ä¸Šå…ƒä»¶ä¸­é€±æœŸæœ‰å“ªäº›? åŸ·è¡Œé †åºå¦‚ä½•? å°±åƒäººæœ‰ç”Ÿè€ç—…æ­»ï¼Œå…ƒä»¶å¾å‡ºç¾åˆ°æ¶ˆå¤±ä¸»è¦ä¹Ÿåˆ†ä¸‰éƒ¨åˆ†</p><blockquote><p>Mount -&gt; Updating -&gt; Unmounting</p></blockquote><p>React è¦å¯«å‡ºä¸€å€‹å…ƒä»¶ï¼Œæœ‰ Class-based æˆ–æ˜¯ Functional å…©ç¨®æ–¹å¼ï¼Œæ—©æœŸçš„ React Class Component é–‹ç™¼åƒé›œäº†å„ç¨®è¤‡é›œçš„å…ƒä»¶é€±æœŸï¼Œä¹Ÿè¨±æ˜¯å› ç‚ºé–‹ç™¼åˆæœŸï¼Œæ‰€ä»¥å°‡é€±æœŸéƒ½æ‹†è§£å¾—å¾ˆè©³ç´°ï¼Œä¸¦ä¸”æä¾›å¯ä»¥å®¢è£½çš„å‹æ…‹ï¼Œå…‰æ˜¯ç†è§£é€™äº›å°±è®“é–‹ç™¼çš„å…¥é–€é–€æª»æé«˜ä¸å°‘ã€‚</p><ol><li>Mount: å·²ç¶“å‡ºç¾åœ¨ç€è¦½å™¨çš„ DOM ä¸Š<ul><li><code>constructor()</code></li><li><code>static getDerivedStateFromProps()</code></li><li><code>render()</code></li><li><code>componentDidMount()</code></li></ul></li><li>Updating: Props æˆ– State è®ŠåŒ–å¾Œå¼•ç™¼çš„å…ƒä»¶æ›´æ–°<ul><li><code>getDerivedStateFromProps()</code></li><li><code>shouldComponentUpdate()</code></li><li><code>render()</code></li><li><code>getSnapshotBeforeUpdate()</code></li><li><code>componentDidUpdate()</code></li></ul></li><li>Unmounting: å¾ç€è¦½å™¨çš„ DOM ä¸­ç§»é™¤<ul><li><code>componentWillUnmount()</code></li></ul></li></ol><p>å¦å¤–å…ƒä»¶å¾ Props æˆ– State è®ŠåŒ–å¾Œå¼•ç™¼æ”¹è®Šçš„éç¨‹ï¼Œä¸»è¦åˆ†ç‚ºå…©å¤§éšæ®µ Render å’Œ Commitï¼Œæœƒå…ˆé€²è¡Œ Render çš„è¨ˆç®—å¾Œæ‰æœƒçœŸçš„ Commit çµæœåˆ°çœŸæ­£çš„ DOM ä¸Šé¢ï¼ŒCommit å‰æœƒæœ‰å€‹ Pre-commitã€‚</p><ol><li>Render: åœ¨é€™å€‹éšæ®µ React èƒ½è‡ªè¡Œæš«åœã€å–æ¶ˆã€é‡æ–°é€™å€‹éç¨‹</li><li>Pre-commit: æ–‡ä»¶ä¸Šæœ‰å‡ºç¾ä½†ç”šå°‘ä½¿ç”¨çš„åŠŸèƒ½ï¼Œæœ‰ä¸€å€‹é€±æœŸæ˜¯ <code>getSnapshotBeforeUpdate()</code>ï¼Œå¯ä»¥çœ‹æˆæ˜¯ä¸€å€‹åšæ±ºå®šå‰çš„å†æ¬¡ç‹€æ…‹ç¢ºèª</li><li>Commit: å¥—ç”¨æ”¹è®Šåˆ°ç€è¦½å™¨çš„ DOM ä¸Šï¼Œè€Œé€™æ˜¯è‚‰çœ¼å¯è¦‹ï¼Œä¹Ÿæ˜¯æˆ‘å€‘è¼ƒå¸¸æ“ä½œçš„é€±æœŸ<ol><li><code>componentDidMount()</code>: Mount æˆåŠŸï¼Œå‡ºç¾åœ¨ DOM ä¸Šé¢</li><li><code>componentDidUpdate()</code>: Props æˆ– State æ”¹è®Š</li><li><code>componentWillUnmount()</code>: å¾ DOM ä¸Šç§»é™¤</li></ol></li></ol><iframe width="100%" height="550" src="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><p>React ç¶“éåå¹´å¾Œï¼Œç¾åœ¨å¸¸è¦‹çš„ Functional Component å·²ç¶“ä¸å†éœ€è¦è™•ç†è¤‡é›œçš„å…ƒä»¶é€±æœŸï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ç†è§£é—œéµå…ƒä»¶é€±æœŸä¸¦é€é hook è™•ç†ï¼Œç•¶å…ƒä»¶ props æˆ–æ˜¯ state æ”¹è®Šå¾Œï¼ŒReact æœƒé€é render çš„æ¼”ç®—æ³•ä¾†æ±ºå®šæœ€çµ‚è¦æ›´æ–°åˆ° DOM ä¸Šé¢çš„æ”¹è®Šï¼Œé€™å€‹éç¨‹å°±æ˜¯å‰›å‰›æåˆ°çš„ reconciliationã€‚</p><p>é›–ç„¶èªªé€é hook èƒ½å¤§é‡ç°¡åŒ–å…ƒä»¶æœ¬èº«çš„è¦å‰‡ï¼Œä½†å…ƒä»¶é‚„æ˜¯æœ‰ä¸€äº›åŸºç¤åŸå‰‡éœ€è¦éµå®ˆä¸€äº›åŸå‰‡ä¾†è¨­è¨ˆ:</p><ol><li>å†ªç­‰ (Idempotent): é€™éƒ¨åˆ†è·Ÿ API è¨­è¨ˆä¸€æ¨£ï¼ŒReact Funtional Component æœ¬è³ªä¸Šä¹Ÿé‚„æ˜¯ä¸€å€‹ Functionï¼Œæ‰€ä»¥å°‡å…ƒä»¶è¨­è¨ˆç‚º Pure Function ä¸”ä¿è­‰æ¯æ¬¡çš„ Input ä¹Ÿå°±æ˜¯ State å’Œ Props ä¸æ”¹çš„æƒ…æ³ä¸‹ï¼Œæ¯æ¬¡éƒ½è¦ Render å‡ºåŒæ¨£çš„çµæœ</li><li>ä¸åœ¨ Render çš„åœ°æ–¹è™•ç† Side Effect: å…ƒä»¶æœ¬èº«å¯ä»¥çœ‹æˆä¸€å€‹ Declarative çš„èªè¨€ï¼Œç†è«–ä¸Šæˆ‘å€‘æƒ³è¦å‡ºç¾ä»€éº¼å°±æ˜¯ä»€éº¼ï¼ŒReact åªå„ªåŒ–ç‹€æ…‹æ”¹è®Šå¾Œçš„ â€œä¸‹å€‹ç‰ˆæœ¬â€ è©²é¡¯ç¤ºä»€éº¼è©²æ€éº¼æ”¹è®Šç•«é¢ï¼Œæœƒå‡ºç¾å‰¯ä½œç”¨è®“ç•«é¢ä¸åŒçš„åœ°æ–¹é€šå¸¸åªå‰©ä½¿ç”¨è€…æ“ä½œäº‹ä»¶æˆ–æ˜¯å¾Œç«¯ API çš„è³‡æ–™ä¸ç¬¦åˆ Idempotentï¼Œç•¶ Render å…ƒä»¶é€™ä»¶äº‹è®Šæˆç´”å‡½å¼ï¼ŒReact ä¹Ÿå¯ä»¥æ›´å®¹æ˜“çš„å»å„ªåŒ–</li><li>ä¸å»ä¿®æ”¹éå…ƒä»¶å…§çš„è³‡æ–™: Props è·Ÿ state éƒ½æ˜¯ immutable ä¹Ÿå°±æ˜¯ä¸è¦é€ æˆé¡å¤–å‰¯ä½œç”¨çš„æ„æ€</li><li>å…ƒä»¶ç”¨ JSX çš„æ–¹å¼åŸ·è¡Œ: é›–ç„¶ Functional Component å¯ä»¥ç•¶æˆ Function ç›´æ¥åŸ·è¡Œ <code>HelloComponent()</code>ï¼Œä½†ä½ æœƒç™¼ç¾ React é–‹ç™¼è€…å·¥å…·å°±ç„¡æ³•è™•ç† AKA React ä¸¦æ²’æœ‰è¾¦æ³•å¥½å¥½è™•ç†ï¼Œå»ºè­°æ–¹å¼é‚„æ˜¯ <code>&lt;HelloComponent /&gt;</code> è®“ React æ­£å¸¸åŸ·è¡Œä¸Šé¢æåˆ°çš„ createElement ç”¢ç”Ÿæ­£ç¢ºçš„ Virtual Dom</li><li>å…ƒä»¶è£¡é¢ä¸è¦å†æœ‰å…ƒä»¶: æœƒè®“å…ƒä»¶æª”æ¡ˆè®Šå¤§ä¹Ÿå¾ˆé›£åšå®Œå…¨éš”é›¢çš„å–®å…ƒæ¸¬è©¦ï¼Œé€™ç¨®å¯«æ³•å¤§æ¦‚åªèƒ½å­˜åœ¨æ–¼é‡æ§‹åˆ°ä¸€åŠçš„ç¨‹å¼ç¢¼</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Bad: å…ƒä»¶åªç”¨ JSX çš„æ–¹å¼åŸ·è¡Œ</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ComponentOne</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ComponentOne</span>&gt;</span><span class="tag">&lt;/<span class="name">ComponentOne</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;() =&gt; &#123;return <span class="tag">&lt;&gt;</span>ComponentTwo<span class="tag">&lt;/&gt;</span></span>;&#125;()&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ComponentOne</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">ComponentTwo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span>ComponentTwo<span class="tag">&lt;/&gt;</span></span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ComponentOne</span>&gt;</span><span class="tag">&lt;/<span class="name">ComponentOne</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;ComponentTwo()&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Bad: å…ƒä»¶è£¡é¢ä¸è¦å†æœ‰å…ƒä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ComponentOne</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">ComponentTwo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span>ComponentTwo<span class="tag">&lt;/&gt;</span></span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ComponentOne</span>&gt;</span><span class="tag">&lt;/<span class="name">ComponentOne</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ComponentTwo</span>&gt;</span><span class="tag">&lt;/<span class="name">ComponentTwo</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Good</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ComponentTwo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span>ComponentTwo<span class="tag">&lt;/&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ComponentOne</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ComponentOne</span>&gt;</span><span class="tag">&lt;/<span class="name">ComponentOne</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ComponentTwo</span>&gt;</span><span class="tag">&lt;/<span class="name">ComponentTwo</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…ƒä»¶é–‹ç™¼-Storybookjs"><a href="#å…ƒä»¶é–‹ç™¼-Storybookjs" class="headerlink" title="å…ƒä»¶é–‹ç™¼: Storybookjs"></a>å…ƒä»¶é–‹ç™¼: Storybookjs</h3><p>æ­¤å¤– Storybook ä¹Ÿæ­è‘—é€™æ³¢å…ƒä»¶çš„æ¦‚å¿µï¼Œç™¼å±•å‡ºäº† <a target="_blank" rel="noopener" href="https://www.componentdriven.org/">Component-based çš„æ¶æ§‹å’Œé–‹ç™¼æ–¹å¼</a>ï¼Œé€™æ¨£çš„æ¦‚å¿µå…¶å¯¦å°±æ˜¯å¤§å®¶ç†Ÿæ‚‰çš„åŸå­åŒ–è¨­è¨ˆï¼Œ</p><ol><li>ç¨ç«‹é–‹ç™¼æ¯å€‹å…ƒä»¶ï¼Œä¸¦ç‚ºå…¶ä¸åŒè®Šé«”æ’°å¯«æ•…äº‹ (æ¸¬è©¦æ¡ˆä¾‹)</li><li>å°‡å°å‹å…ƒä»¶çµ„åˆåœ¨ä¸€èµ·ä»¥å¯¦ç¾æ›´è¤‡é›œçš„åŠŸèƒ½</li><li>é€šéçµ„åˆè¤‡åˆå…ƒä»¶ä¾†çµ„è£é é¢</li><li>æ•´åˆè³‡æ–™å’Œæ¥­å‹™é‚è¼¯å°‡é é¢æ•´åˆåˆ°å°ˆæ¡ˆ</li></ol><blockquote><p><img src="https://bradfrost.com/wp-content/uploads/2013/06/atomic-design.png"><br>åœ–ç‰‡ä¾†æº: <a target="_blank" rel="noopener" href="https://bradfrost.com/blog/post/atomic-web-design/">https://bradfrost.com/blog/post/atomic-web-design/</a></p></blockquote><p>åº•ä¸‹çš„ç¨‹å¼ç¢¼ç¤ºç¯„äº†ä¸€å€‹æœ€ç°¡å–®çš„æ•…äº‹æ›¸è¨­å®šï¼Œé€éä»¥ä¸‹çš„è¨­å®šæˆ‘å€‘å°±èƒ½å¤ è¼•é¬†çš„ç²å¾—ä¸€å€‹å®Œå…¨éš”é›¢çš„ç’°å¢ƒä¾†é€²è¡Œå…ƒä»¶é–‹ç™¼ï¼Œå³ä½¿å¤šäººåˆä½œçš„å°ˆæ¡ˆä¹Ÿä¸å®¹æ˜“äº’ç›¸è¡çªï¼Œè¨­è¨ˆå‡ºä¾†çš„å…ƒä»¶ä¹Ÿæœƒæ›´å®¹æ˜“ç¬¦åˆå–®ä¸€è²¬ä»»åŸå‰‡ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">Meta</span>, <span class="title class_">StoryObj</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@storybook/react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Histogram</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./Histogram&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">meta</span>: <span class="title class_">Meta</span>&lt;<span class="keyword">typeof</span> <span class="title class_">Histogram</span>&gt; = &#123;</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">Histogram</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> meta;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Story</span> = <span class="title class_">StoryObj</span>&lt;<span class="keyword">typeof</span> <span class="title class_">Histogram</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">Default</span>: <span class="title class_">Story</span> = &#123;</span><br><span class="line">  <span class="attr">args</span>: &#123;</span><br><span class="line">    <span class="attr">dataType</span>: <span class="string">&quot;latency&quot;</span>,</span><br><span class="line">    <span class="attr">showHistogramLabels</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">histogramAccentColor</span>: <span class="string">&quot;#1EA7FD&quot;</span>,</span><br><span class="line">    <span class="attr">label</span>: <span class="string">&quot;Latency distribution&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç”±æ–¼ component-based çš„æ¦‚å¿µèˆˆèµ·å…ƒä»¶é–‹ç™¼æˆç‚ºé¡¯å­¸ï¼Œ<a href="https://linyencheng.github.io/2022/09/10/relationships-between-frontend-and-backend/css-in-js-with-reactjs/">CSS-in-JS</a> æä¾›äº†å°‡æ¨£å¼å¯«åœ¨å…ƒä»¶ä¸­è§£æ±ºæ–¹æ¡ˆï¼Œä¹Ÿè®“ CSS éœ€è¦å¾å¯«ç¨‹å¼èªè¨€çš„è§’åº¦å»é€²è¡Œæ¶æ§‹è¨­è¨ˆã€‚</p><p>é–‹ç™¼ä¸Š <a href="https://linyencheng.github.io/2022/09/10/relationships-between-frontend-and-backend/css-in-js-with-reactjs/">CSS-in-JS</a> çš„æµè¡Œï¼Œç•¶ç¶²é ä¸‰æœ¬æŸ± HTMLã€CSSã€JavaScript èƒ½å¤ å®Œæ•´çš„å¯«åœ¨åŒä¸€å€‹æª”æ¡ˆæ™‚ï¼Œä¹Ÿä½¿ Reactjs çš„ UI é–‹ç™¼æ›´åŠ éˆæ´»å’Œä¸€è‡´ï¼Œä¸åƒ…é™ä½äº†ç¶­è­·é›£åº¦ä¹ŸåŠ é€Ÿäº†é–‹ç™¼é€Ÿåº¦æ¸›å°‘æª”æ¡ˆåˆ‡æ›ï¼ŒåŒæ™‚ä¹Ÿæ¸›å°‘ class å‘½åéŒ¯èª¤ç­‰ç­‰å•é¡Œï¼Œè®“å…ƒä»¶æˆç‚ºçœŸæ­£é«˜å…§èšçš„å…ƒä»¶ã€‚</p><p>å¸¸è¦‹çš„ library åƒæ˜¯ css moduleã€vanilla-extractã€styled-componentsã€styled-jsx (Next.js)ã€StyleX (Facebook) éƒ½éå¸¸å¥½ä¸Šæ‰‹ï¼Œæ›´å®Œæ•´çš„å°‡å…ƒä»¶æ¨¡çµ„åŒ–ä¸¦å¢åŠ å¯é‡ç”¨æ€§ã€‚</p><div class="google-ad"><ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-h4+1+1q-1t-2x" data-ad-client="ca-pub-1297466993744883" data-ad-slot="9012117796"></ins></div><hr><div class="more-article hidden-md hidden-lg"><span class="h4">æ›´å¤šç›¸é—œæ–‡ç« </span><hr class="hidden-sm hidden-xs"><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-img"><img alt="yencheng" loading="lazy" src="https://linyencheng.github.io/img/icon_48.png"></div><div class="popular-posts-title"><h3><a href="/2020/02/02/react-component-class-based-vs-functional/" title="React Class-based vs Functional Component" rel="bookmark">React Class-based vs Functional Component</a></h3><span>2020-02-02<span></span></span></div></li><li class="popular-posts-item"><div class="popular-posts-img"><img alt="yencheng" loading="lazy" src="https://linyencheng.github.io/img/icon_48.png"></div><div class="popular-posts-title"><h3><a href="/2021/02/28/react-in-enterprise-app/" title="ä¸åœ¨å¤§å‹å°ˆæ¡ˆå°å…¥ React.js çš„ 5 å€‹åŸå› " rel="bookmark">ä¸åœ¨å¤§å‹å°ˆæ¡ˆå°å…¥ React.js çš„ 5 å€‹åŸå› </a></h3><span>2021-02-28<span></span></span></div></li><li class="popular-posts-item"><div class="popular-posts-img"><img alt="yencheng" loading="lazy" src="https://linyencheng.github.io/img/icon_48.png"></div><div class="popular-posts-title"><h3><a href="/2021/05/07/react-interview-questions/" title="ä½ äº†è§£ React JS å—" rel="bookmark">ä½ äº†è§£ React JS å—</a></h3><span>2021-05-07<span></span></span></div></li><li class="popular-posts-item"><div class="popular-posts-img"><img alt="yencheng" loading="lazy" src="https://linyencheng.github.io/img/icon_48.png"></div><div class="popular-posts-title"><h3><a href="/2017/09/21/react-intl/" title="React å¤šåœ‹èªè¨€ç°¡ä»‹(ä½¿ç”¨ react-intl)" rel="bookmark">React å¤šåœ‹èªè¨€ç°¡ä»‹(ä½¿ç”¨ react-intl)</a></h3><span>2017-09-21<span></span></span></div></li><li class="popular-posts-item"><div class="popular-posts-img"><img alt="yencheng" loading="lazy" src="/2017/05/18/thinking-component-state-and-props/state.png"></div><div class="popular-posts-title"><h3><a href="/2017/05/18/thinking-component-state-and-props/" title="Component State and Props" rel="bookmark">Component State and Props</a></h3><span>2017-05-18<span></span></span></div></li></ul></div><hr class="hidden-md hidden-lg"><span id="likeCo" class="pl-4 ml-4" style="color:#9b9b9b">å–œæ­¡é€™ç¯‡æ–‡ç« ï¼Œè«‹å¹«å¿™æ‹æ‹æ‰‹å–” ğŸ¤£</span><hr><div class="likecoin-embed likecoin-button" style="margin:0;max-height:185px;min-height:185px" data-liker-id="linyencheng-tw" data-href="https://linyencheng.github.io/2024/04/06/react-10-years-developer-experience"></div><hr><ul class="pager"><li class="previous"><a href="/2024/05/30/tool-vite-system-env/" data-toggle="tooltip" data-placement="top" title="Vite ç³»çµ±ç’°å¢ƒè®Šæ•¸">&larr; ä¸Šä¸€ç¯‡</a></li><li class="next"><a href="/2024/02/02/cumulative-layout-shift/" data-toggle="tooltip" data-placement="top" title="Cumulative Layout Shift (CLS)">ä¸‹ä¸€ç¯‡ &rarr;</a></li></ul><br><div class="p-2 google-ad"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-1297466993744883" data-ad-slot="1800981579"></ins></div><div class="comment"><div id="disqus_thread" class="disqus-thread"></div></div></div><div class="col-lg-3 col-lg-offset-0 visible-lg-block sidebar-container catalog-container sticky__sidebar"><h5 id="-1" class="p-0"><a class="catalog-toggle" href="#">ç«™å…§æœå°‹</a></h5><div id="site_search"><div class="form-group mt-3"><input type="text" id="local-search-input" inputmode="search" name="q" results="0" autocomplete="off" placeholder="è«‹è¼¸å…¥é—œéµå­—" class="st-search-input st-default-search-input form-control"></div><div id="local-search-result"></div></div><div class="side-catalog"><h5 id="-1"><a class="catalog-toggle" href="#">å…¶ä»–ç›¸é—œæ–‡ç« </a></h5><hr class="hidden-sm hidden-xs"><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-img"><img alt="yencheng" loading="lazy" src="https://linyencheng.github.io/img/icon_48.png"></div><div class="popular-posts-title"><h3><a href="/2020/02/02/react-component-class-based-vs-functional/" title="React Class-based vs Functional Component" rel="bookmark">React Class-based vs Functional Component</a></h3><span>2020-02-02<span></span></span></div></li><li class="popular-posts-item"><div class="popular-posts-img"><img alt="yencheng" loading="lazy" src="https://linyencheng.github.io/img/icon_48.png"></div><div class="popular-posts-title"><h3><a href="/2021/02/28/react-in-enterprise-app/" title="ä¸åœ¨å¤§å‹å°ˆæ¡ˆå°å…¥ React.js çš„ 5 å€‹åŸå› " rel="bookmark">ä¸åœ¨å¤§å‹å°ˆæ¡ˆå°å…¥ React.js çš„ 5 å€‹åŸå› </a></h3><span>2021-02-28<span></span></span></div></li><li class="popular-posts-item"><div class="popular-posts-img"><img alt="yencheng" loading="lazy" src="https://linyencheng.github.io/img/icon_48.png"></div><div class="popular-posts-title"><h3><a href="/2021/05/07/react-interview-questions/" title="ä½ äº†è§£ React JS å—" rel="bookmark">ä½ äº†è§£ React JS å—</a></h3><span>2021-05-07<span></span></span></div></li></ul></div><div class="side-catalog mt-3"><h5 class="widget-title">æœ€æ–°çš„æ–‡ç« </h5><hr class="hidden-sm hidden-xs"><div class="widget"><ul class="p-0 popular-posts"><li class="popular-posts-item"><div class="popular-posts-img"><img loading="lazy" src="https://linyencheng.github.io/img/icon_48.png"></div><div class="popular-posts-title"><h3 id="progressive-web-app-1"><a href="/2025/08/19/kimetsu-no-yaiba/ubuyashiki-kagaya-lead-org/" title="å®ˆè­·å¤§å®¶çš„æœ€å¼·ç¤¾é•·ç”¢å±‹æ•·è€€å“‰" rel="bookmark">å®ˆè­·å¤§å®¶çš„æœ€å¼·ç¤¾é•·ç”¢å±‹æ•·è€€å“‰</a></h3><span>2025-11-28</span></div></li><li class="popular-posts-item"><div class="popular-posts-img"><img loading="lazy" src="https://linyencheng.github.io/img/icon_48.png"></div><div class="popular-posts-title"><h3 id="progressive-web-app-1"><a href="/2025/08/10/kimetsu-no-yaiba/agatsuma-zenitsu-learn-one-thing/" title="æˆ‘å¦»å–„é€¸æ•™æœƒæˆ‘çš„äº‹æƒ…" rel="bookmark">æˆ‘å¦»å–„é€¸æ•™æœƒæˆ‘çš„äº‹æƒ…</a></h3><span>2025-11-28</span></div></li><li class="popular-posts-item"><div class="popular-posts-img"><img loading="lazy" src="https://linyencheng.github.io/img/icon_48.png"></div><div class="popular-posts-title"><h3 id="progressive-web-app-1"><a href="/2025/08/10/kimetsu-no-yaiba/kibutsuji-muzan-boss/" title="é¬¼æ»…ä¹‹åˆƒç„¡é™åŸä¸Šæ˜ ï¼å¾é¬¼èˆè¾»ç„¡æ…˜å­¸è·å ´ç®¡ç†" rel="bookmark">é¬¼æ»…ä¹‹åˆƒç„¡é™åŸä¸Šæ˜ ï¼å¾é¬¼èˆè¾»ç„¡æ…˜å­¸è·å ´ç®¡ç†</a></h3><span>2025-11-28</span></div></li></ul></div></div><div class="side-catalog mt-3 google-ad"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1297466993744883" data-ad-slot="9240487898" data-ad-format="auto" data-full-width-responsive="true"></ins></div></div><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"></div></div></div></article><script>var disqus_shortname="linyencheng",disqus_identifier="https://linyencheng.github.io/2024/04/06/react-10-years-developer-experience/",disqus_url="https://linyencheng.github.io/2024/04/06/react-10-years-developer-experience/";function loadLikeCo(){var e;(e=document.createElement("script")).type="text/javascript",e.defer=!0,e.src="//static.like.co/sdk/v1/button.js",(document.head||document.body).appendChild(e)}function loadDisqus(){var e;(e=document.createElement("script")).type="text/javascript",e.defer=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}var runningOnBrowser="undefined"!=typeof window,isBot=runningOnBrowser&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),supportsIntersectionObserver=runningOnBrowser&&"IntersectionObserver"in window;setTimeout(function(){var n;!isBot&&supportsIntersectionObserver?(n=new IntersectionObserver(function(e){e[0].isIntersecting&&(loadLikeCo(),n.disconnect())},{threshold:[0]})).observe(document.getElementById("likeCo")):loadLikeCo()},1),setTimeout(function(){var n;!isBot&&supportsIntersectionObserver?(n=new IntersectionObserver(function(e){e[0].isIntersecting&&(loadDisqus(),n.disconnect())},{threshold:[0]})).observe(document.getElementById("disqus_thread")):loadDisqus()},1)</script><script>function getQueryString(t){return Object.keys(t).map(e=>e+"="+t[e]).join("&")}function updateDom(e){e.result.viewCountTotal&&768<window.innerWidth&&(localStorage.setItem("2024%2F04%2F06%2Freact-10-years-developer-experience%2F",JSON.stringify(e)),document.getElementById("viewCountTotal").innerHTML='| ğŸ‘€ <span class="pl-1">'+e.result.viewCountTotal+"</span>")}function getViewCount(){var e=getQueryString({url:"2024%2F04%2F06%2Freact-10-years-developer-experience%2F",title:"Reactjs%20%E5%95%8F%E4%B8%96%E5%8D%81%E5%B9%B4%E5%BE%8C%E7%9A%84%E9%96%8B%E7%99%BC%E9%AB%94%E9%A9%97",action:"read_viewCount"});fetch("https://script.google.com/macros/s/AKfycbzaNdmEmtd1OTLicwwL628yQsVLKV3eSkxKqIsgUZ3zVQKn2nAnCnrOGgMgT-T8364N/exec?"+e).then(e=>e.json()).then(e=>updateDom(e)).catch(e=>console.error(e))}function initViewCount(){var e=localStorage.getItem("2024%2F04%2F06%2Freact-10-years-developer-experience%2F");e&&updateDom(JSON.parse(e)),setTimeout(()=>{getViewCount()},800)}initViewCount()</script><style>@media all and (min-width:800px){.anchorjs-link{position:absolute;left:-.75em;font-size:1.1em;margin-top:-.1em}}@media all and (max-width:800px){.google-ad{max-height:140px}}</style><footer><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a target="_blank" rel="noopener" aria-label="YenCheng's Medium" href="https://linyencheng-tw.medium.com/"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-medium fa-stack-1x fa-inverse"></i></span></a></li><li><a title="Facebook" target="_blank" rel="noopener" aria-label="YenCheng's Facebook" href="https://www.facebook.com/linyencheng.3mins"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a title="Github" target="_blank" rel="noopener" aria-label="YenCheng's Github" href="https://github.com/LinYenCheng"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a title="Linkedin" target="_blank" rel="noopener" href="https://www.linkedin.com/in/LinYenCheng"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted"><a title="éš±ç§æ¬Šæ”¿ç­–" href="/pravicy">éš±ç§æ¬Šæ”¿ç­–</a> | Copyright &copy; å‰ç«¯ä¸‰åˆ†é˜ 2025<br>Theme by <a title="åŸä½œè€…" target="_blank" rel="noopener" href="http://huangxuan.me">Hux</a> <span style="display:inline-block;margin:0 5px">& </span>Ported by <a title="ç¬¬äºŒä½œè€…" target="_blank" rel="noopener" href="https://github.com/Kaijun/hexo-theme-huxblog">Kaijun</a></p></div></div></div></footer><script defer>function loadScript(e,t){let n=document.createElement("script");n.src=e,n.defer=!0,n.onload=()=>t(null),n.onerror=e=>t(e),setTimeout(()=>{document.head.appendChild(n)},800)}function loadCSS(e,t){var n=document.createElement("link");n.rel="preload",n.href=e,n.as="style",document.head.appendChild(n);let l=document.createElement("link");l.rel="stylesheet",l.href=e,l.onload=()=>t(null),l.onerror=e=>t(e),setTimeout(()=>{document.head.appendChild(l)},800)}loadCSS("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",()=>{console.log("load font-awesome.min.css")}),loadScript("https://linyencheng.github.io/js/jquery.min.js",function(){var e=window,t=document,n="script",l="dataLayer";e[l]=e[l]||[],e[l].push({"gtm.start":(new Date).getTime(),event:"gtm.js"}),e=t.getElementsByTagName(n)[0],(l=t.createElement(n)).defer=!0,l.src="https://www.googletagmanager.com/gtm.js?id=GTM-W5LMXCR",e.parentNode.insertBefore(l,e),window.initViewCountAll&&window.initViewCountAll(),window.initViewCount&&window.initViewCount();{document.querySelectorAll("#toc .toc-item:has(> .toc-child)").forEach(n=>{var e=n.querySelector(".toc-link");let t=document.createElement("i");t.classList.add("fa","fa-caret-down");var l=document.createElement("i");l.classList.add("fa","fa-caret-right"),n.prepend(t,l),l.classList.add("hide"),n.querySelectorAll("i").forEach(t=>{t.addEventListener("click",function(){var e=n.querySelector(".toc-child");e.style.display="none"===e.style.display?"block":"none",t.classList.toggle("hide"),t.nextElementSibling.classList.toggle("hide")})}),e.addEventListener("dblclick",function(){n.querySelector(".toc-child").style.display="none",t.classList.toggle("hide")}),e.addEventListener("click",function(){var e=n.querySelector(".toc-child");e.style.display="none"===e.style.display?"block":"none",t.classList.toggle("hide")})});let t=document.querySelector("#toc .toc-title");t&&(t.classList.add("clickable"),t.addEventListener("click",function(){var e=t.nextElementSibling;"none"===e.style.display?(e.style.display="block",caretDown.classList.remove("hide"),caretRight.classList.add("hide")):(e.style.display="none",caretDown.classList.add("hide"),caretRight.classList.remove("hide"))}))}loadScript("https://linyencheng.github.io/js/bootstrap.min.js",function(){loadScript("https://linyencheng.github.io/js/hux-blog.min.js",function(){setTimeout(()=>{searchFunc("/search.xml","local-search-input","local-search-result")},3e3),document.getElementById("tag_cloud")&&loadScript("https://linyencheng.github.io/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})})})})</script></body></html>